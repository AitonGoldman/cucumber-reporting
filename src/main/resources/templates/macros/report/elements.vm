#macro(includeElements, $elements, $linkToFeature)

  #foreach($element in $elements)
    <div class="element">
      #if($linkToFeature)
        <div class="indention">
          <a href="$element.getFeature().getReportFileName()">View Feature</a> <i>$element.getFeature().getName()</i>
        </div>
      #end
      #includeTags($element.getTags())

      #includeBrief($element.getKeyword(), $element.getStatus(), $element.getName())
      <div class="description indention">$element.getDescription()</div>
      #includeHooks("Before", $element.getBefore())

      <div class="steps inner-level">
        #foreach($step in $element.getSteps())
          <div class="step-details">
            <div class="$step.getStatus().getRawName()">
              #includeBrief($step.getKeyword(), $step.getStatus(), $step.getName(), $step.getResult())
            </div>
              #includeMessage($step.getErrorMessage(), "error-message")
            #if($step.getDocString())
                <pre class="docstring">$step.getDocString().getValue()</pre>
            #end
          </div>

          #if($step.hasRows())
            <table class="arguments-table">
              #foreach($row in $step.getRows())
                <tr>
                  #foreach($cell in $row.getCells())
                    <td>$cell</td>
                  #end
                </tr>
              #end
            </table>
          #end

          #includeMessage($step.getOutput(), "output")
          #if(!$step.getAttachments().isEmpty())
            <div class="embeddings inner-level">$step.getAttachments()</div>
          #end
        #end
      </div>

      #includeHooks("After", $element.getAfter())
    </div>
  #end

#end
