<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Cucumber-JVM Html Reports - Feature Overview</title>

#include("/templates/headers.html")

#include("/templates/tableSorter.vm")
<script src="js/highcharts.js"></script>
<script src="js/highcharts-3d.js"></script>

#include("/styles/reporting.css")                        

</head>
<body id="top">

    #parse("/templates/topMenu.vm")

    #set($summary_key = "Feature")
    #set($summary_description = "The following graph shows passing and failing statistics for features in this build.")
    #parse("/templates/summaryOverview.vm")

    <div class="container_12">
        <div class="grid_12">
        <script>
		$(function () {
		    $('#steps_chart').highcharts({
		        chart: {
		            type: 'pie',
		            options3d: {
		                enabled: true,
		                alpha: 45,
		                beta: 0
		            }
		        },
		        title: {
		            text: 'Steps'
		        },
		        plotOptions: {
		            pie: {
		                allowPointSelect: true,
		                cursor: 'pointer',
		                depth: 35,
		                dataLabels: {
		                    enabled: true,
		                    format: '<b>{point.name}</b>: {point.percentage:.2f} %'
		                }
		            }
		        },
		        series: [{
		            type: 'pie',
		            name: 'Steps',
		            data: [
		                {
                            selected: true,
 		                    sliced: true,
 		                    name: 'Passed',
		                    color: "$status_color.get(0)",
		                    y: $all_steps_passes
		                },
		                {
		                    name: 'Failed',
		                    color: "$status_color.get(1)",
		                    y: $all_steps_failed
		                },
		                {
		                    name: 'Skipped',
		                    color: "$status_color.get(2)",
		                    y: $all_steps_skipped
		                },
		                {
		                    name: 'Pending',
		                    color: "$status_color.get(3)",
		                    y: $all_steps_pending
		                },
		                {
		                    name: 'Undefined',
		                    color: "$status_color.get(4)",
		                    y: $all_steps_undefined
		                },
		                {
		                    name: 'Missing',
		                    color: "$status_color.get(5)",
		                    y: $all_steps_missing
		                }
		            ]
		        }]
		    });

                $('#scenarios_chart').highcharts({
			        chart: {
			            type: 'pie',
			            options3d: {
			                enabled: true,
			                alpha: 45
			            }
			        },
                    title: {
                        text: 'Scenarios'
                    },
			        plotOptions: {
			            pie: {
			                innerSize: 150,
			                depth: 35,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
		                        format: '<b>{point.name}</b>: {point.percentage:.2f} %'
                            }
			            }
			        },
                    series: [{
                        name: 'Scenarios',
                        data: [
                            {
                                name: 'Passed',
                                y: $all_scenarios_passed,
                                color: "$status_color.get(0)"
                            },
                            {

                                selected: true,
 	                            sliced: true,
                                name: 'Failed',
                                y: $all_scenarios_failed,
                                color: "$status_color.get(1)"
                            }
                        ]
                    }]
                });
            });
        </script>
        </div>
        <div style="text-align:center;">
            <table id="js-charts">
                <tr>
                    <td><div style="width:480px;height:350px" id="steps_chart"></div></td>
                    <td><div style="width:480px;height:350px" id="scenarios_chart"></div></td>
                </tr>
            </table>
        </div>

    <div>
    <h2 id="feature-statistics-title">Feature Statistics</h2>
    <table id="tablesorter" class="stats-table">
        #set($table_key = "Feature")
        #parse("/templates/tableHeader.vm")

        <tbody>
        #foreach($feature in $all_features)

            #if($feature.getStatus().name() == "PASSED")
                #set($bgcolour = $status_color.get(0))
            #else
                #set($bgcolour = $status_color.get(1))
            #end
            #set($featureName = $feature.getRawName())

            <tr>
                <td style="text-align:left;"><a id="stats-$featureName" href="$feature.getReportFileName()">$featureName</a></td>
                #if($parallel)
                <td id="device">$feature.getDeviceName()</td>
                #end
                <td id="stats-number-scenarios-$featureName">$feature.getScenarios()</td>
                <td id="stats-number-scenarios-passed-$featureName">$feature.getPassedScenarios()</td>
                <td id="stats-number-scenarios-failed-$featureName">$feature.getFailedScenarios()</td>
                <td id="stats-number-steps-$featureName">$feature.getNumberOfSteps()</td>
                <td id="stats-number-steps-passed-$featureName">$feature.getNumberOfPasses()</td>
                <td id="stats-number-steps-failed-$featureName"    #if($feature.getNumberOfFailures() > 0)  style="background-color:$status_color.get(1)" #end>$feature.getNumberOfFailures()</td>
                <td id="stats-number-steps-skipped-$featureName"   #if($feature.getNumberOfSkipped() > 0)   style="background-color:$status_color.get(2)" #end>$feature.getNumberOfSkipped()</td>
                <td id="stats-number-steps-pending-$featureName"   #if($feature.getNumberOfPending() > 0)   style="background-color:$status_color.get(3)" #end>$feature.getNumberOfPending()</td>
                <td id="stats-number-steps-undefined-$featureName" #if($feature.getNumberOfUndefined() > 0) style="background-color:$status_color.get(4)" #end>$feature.getNumberOfUndefined()</td>
                <td id="stats-number-steps-missing-$featureName"   #if($feature.getNumberOfMissing() > 0)   style="background-color:$status_color.get(5)" #end>$feature.getNumberOfMissing()</td>
                <td id="stats-duration-$featureName" style="text-align:right;white-space:nowrap">$feature.getTotalDuration()</td>
                <td id="stats-status-$featureName" style="background-color: $bgcolour;">$feature.getRawStatus()</td>
            </tr>
        #end
        </tbody>
        <tr>
            <th id="stats-total-features" style="background-color:lightgray">$all_features.size()</th>
            #if($parallel)
            <th id="stats-total-features" style="background-color:lightgray">-</th>
            #end
            <th id="stats-total-scenarios" style="background-color:lightgray">$all_scenarios</th>
            <th id="stats-total-scenarios-passed" style="background-color:lightgray">$all_scenarios_passed</th>
            <th id="stats-total-scenarios-failed" style="background-color:lightgray">$all_scenarios_failed</th>
            <th id="stats-total-steps" style="background-color:lightgray">$all_steps.size()</th>
            <th id="stats-total-steps-passed" style="background-color:lightgray">$all_steps_passes</th>
            <th id="stats-total-steps-failed" style="background-color:lightgray">$all_steps_failed</th>
            <th id="stats-total-steps-skipped" style="background-color:lightgray">$all_steps_skipped</th>
            <th id="stats-total-steps-pending" style="background-color:lightgray">$all_steps_pending</th>
            <th id="stats-total-steps-undefined" style="background-color:lightgray">$all_steps_undefined</th>
            <th id="stats-total-steps-missing" style="background-color:lightgray">$all_steps_missing</th>
            <th id="stats-total-duration" style="background-color:lightgray;text-align:right;white-space:nowrap">$all_durations</th>
            <th id="stats-total-totals" style="background-color:lightgray">Totals</th>
        </tr>
    </table>
    </div>

    </div>
</div>


#parse("/templates/footer.vm")                        

</body>
</html>
